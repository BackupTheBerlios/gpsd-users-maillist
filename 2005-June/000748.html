<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Gpsd-users] gpsd hotplug error
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/gpsd-users/2005-June/index.html" >
   <LINK REL="made" HREF="mailto:gpsd-users%40lists.berlios.de?Subject=Re%3A%20%5BGpsd-users%5D%20gpsd%20hotplug%20error&In-Reply-To=%3C20050610190138.1a4e13e0%40localhost%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000747.html">
   <LINK REL="Next"  HREF="000749.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Gpsd-users] gpsd hotplug error</H1>
    <B>Steve Arnold</B> 
    <A HREF="mailto:gpsd-users%40lists.berlios.de?Subject=Re%3A%20%5BGpsd-users%5D%20gpsd%20hotplug%20error&In-Reply-To=%3C20050610190138.1a4e13e0%40localhost%3E"
       TITLE="[Gpsd-users] gpsd hotplug error">sarnold at arnolds.dhs.org
       </A><BR>
    <I>Sat Jun 11 04:01:38 CEST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="000747.html">[Gpsd-users] Bug resend needed
</A></li>
        <LI>Next message: <A HREF="000749.html">[Gpsd-users] gpsd hotplug error
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#748">[ date ]</a>
              <a href="thread.html#748">[ thread ]</a>
              <a href="subject.html#748">[ subject ]</a>
              <a href="author.html#748">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Howdy:

Well, the svn repo came back up and I tried the latest code (as of 6
days ago) with no change in the symptoms below.  We've had a chance
to do a little more work since the patch attempt below, but the only
thing we're sure of (I think) is that the hotplug script appears to
be trying to open the device without waiting for udev to create it. 

Certain things slow it down enough to work correctly; the patch
below didn't work but running it with trace/debug tools sometimes
makes it work fine.  We don't think our patch is the right
approach, it was just a brute-force experiment; then we got
distracted with more pressing tasks...

This is all being done on multiple gentoo boxes (x86 and ppc) with
only mildly bleeding edge configs (in my case, a 2.6.11.7 kernel,
udev 058, hotplug 20040923, python 2.3.5, gcc-3.4.4, etc).  We've
tried both 2.25 and the latest code from 6 days ago.

Bogus sleep patch: 
<A HREF="http://arnolds.dhs.org/static/files/gpsd-2.25-race.patch">http://arnolds.dhs.org/static/files/gpsd-2.25-race.patch</A>

Debug output:  <A HREF="http://arnolds.dhs.org/static/files/error_log.txt">http://arnolds.dhs.org/static/files/error_log.txt</A>

Output of the following command as root:

strace -o error_trace.txt /etc/hotplug/usb/gpsd.hotplug add
/dev/ttyUSB0

<A HREF="http://arnolds.dhs.org/static/files/error_trace.txt">http://arnolds.dhs.org/static/files/error_trace.txt</A>

Thanks in advance for any feedback.

Steve

-- 
Steve Arnold                           <A HREF="http://arnolds.dhs.org/">http://arnolds.dhs.org/</A>
gnupg key:      <A HREF="http://arnolds.dhs.org/static/files/pubkey.txt">http://arnolds.dhs.org/static/files/pubkey.txt</A>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000747.html">[Gpsd-users] Bug resend needed
</A></li>
	<LI>Next message: <A HREF="000749.html">[Gpsd-users] gpsd hotplug error
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#748">[ date ]</a>
              <a href="thread.html#748">[ thread ]</a>
              <a href="subject.html#748">[ subject ]</a>
              <a href="author.html#748">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/gpsd-users">More information about the Gpsd-users
mailing list</a><br>
</body></html>
