<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Gpsd-users] Gpsd on a Zaurus SL-C3000
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/gpsd-users/2005-March/index.html" >
   <LINK REL="made" HREF="mailto:gpsd-users%40lists.berlios.de?Subject=Re%3A%20%5BGpsd-users%5D%20Gpsd%20on%20a%20Zaurus%20SL-C3000&In-Reply-To=%3CPine.LNX.4.62.0503301255300.4923%40catbert.rellim.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000510.html">
   <LINK REL="Next"  HREF="000470.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Gpsd-users] Gpsd on a Zaurus SL-C3000</H1>
    <B>Gary E. Miller</B> 
    <A HREF="mailto:gpsd-users%40lists.berlios.de?Subject=Re%3A%20%5BGpsd-users%5D%20Gpsd%20on%20a%20Zaurus%20SL-C3000&In-Reply-To=%3CPine.LNX.4.62.0503301255300.4923%40catbert.rellim.com%3E"
       TITLE="[Gpsd-users] Gpsd on a Zaurus SL-C3000">gem at rellim.com
       </A><BR>
    <I>Wed Mar 30 23:02:16 CEST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="000510.html">[Gpsd-users] Gpsd on a Zaurus SL-C3000
</A></li>
        <LI>Next message: <A HREF="000470.html">[Gpsd-users] Gpsd on a Zaurus SL-C3000
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#467">[ date ]</a>
              <a href="thread.html#467">[ thread ]</a>
              <a href="subject.html#467">[ subject ]</a>
              <a href="author.html#467">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Yo Eric!

Hey, gimme a break, I swiped the code from the Garmin SDK.  If someone
can actually test this on another byte order with a Garmin, and cares,
I'll take the time to fix it.

I do disagree on the portability of the pack and cast method, this is
how glibc does malloc internally.  Any time you can use structures instead
of offsets you increase readability and maintainability.

Given the gpsd/garmin code dependency on the very latest Linux kernel for the
Garmin driver I doubt putting this on another achitecture will happen soon.

RGDS
GARY
- ---------------------------------------------------------------------------
Gary E. Miller Rellim 20340 Empire Blvd, Suite E-3, Bend, OR 97701
	<A HREF="https://lists.berlios.de/mailman/listinfo/gpsd-users">gem at rellim.com</A>  Tel:+1(541)382-8588 Fax: +1(541)382-8676

On Wed, 30 Mar 2005, Russell Nelson wrote:

&gt;<i> Date: Wed, 30 Mar 2005 14:28:59 -0500
</I>&gt;<i> From: Russell Nelson &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/gpsd-users">nelson at crynwr.com</A>&gt;
</I>&gt;<i> To: <A HREF="https://lists.berlios.de/mailman/listinfo/gpsd-users">gpsd-users at lists.berlios.de</A>
</I>&gt;<i> Subject: Re: [Gpsd-users] Gpsd on a Zaurus SL-C3000
</I>&gt;<i>
</I>&gt;<i> Eric S. Raymond writes:
</I>&gt;<i>  &gt; OK.  The Garmin maintainer may say differently, but it looks to me like this
</I>&gt;<i>  &gt; warning is one of the ultra-picky ones generated by -W and can be safely
</I>&gt;<i>  &gt; ignored.  What it points out could be a problem on machine architectures
</I>&gt;<i>  &gt; without a barrel shifter, but there are very few of those any more.
</I>&gt;<i>
</I>&gt;<i> ARM is a pretty significant architecture.  Casting a pointer to a
</I>&gt;<i> char array into a pointer to a struct is almost ALWAYS a lose for the
</I>&gt;<i> ARM architecture.  It might work, but it's fragile code.  Instead of
</I>&gt;<i> doing this (with the structure replaced by an int for clarity):
</I>&gt;<i>
</I>&gt;<i>   int foo;
</I>&gt;<i>   unsigned char *bar;
</I>&gt;<i>
</I>&gt;<i>   foo = *(int *)bar;
</I>&gt;<i>
</I>&gt;<i> do this for big-endian data:
</I>&gt;<i>
</I>&gt;<i>   foo = bar[0]&lt;&lt;8 | bar[1];
</I>&gt;<i>
</I>&gt;<i> and this for little-endian data:
</I>&gt;<i>
</I>&gt;<i>   foo = bar[0] | bar[1]&lt;&lt;8;
</I>&gt;<i>
</I>&gt;<i> Note that when you do that kind of coding, it's robust.  The
</I>&gt;<i> endianness of the processor doesn't matter.  You avoid intellectual
</I>&gt;<i> errors with &quot;Which endian is this data?&quot; by being forced to specify on
</I>&gt;<i> the spot the endianness.  You avoid portability problems with
</I>&gt;<i> unnoticed little-endian -&gt; little-endian conversions which fail on a
</I>&gt;<i> big-endian architecture.  And once the peephole optimizer gets through
</I>&gt;<i> with it, the code ends up being exactly what you would have written if
</I>&gt;<i> you were coding in assembly.
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> --My blog is at     blog.russnelson.com         | The laws of physics cannot
</I>&gt;<i> Crynwr sells support for free software  | PGPok | be legislated.  Neither can
</I>&gt;<i> 521 Pleasant Valley Rd. | +1 315-323-1241 cell  | the laws of countries.
</I>&gt;<i> Potsdam, NY 13676-3213  | +1 212-202-2318 VOIP  |
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Gpsd-users mailing list
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/gpsd-users">Gpsd-users at lists.berlios.de</A>
</I>&gt;<i> <A HREF="http://lists.berlios.de/mailman/listinfo/gpsd-users">http://lists.berlios.de/mailman/listinfo/gpsd-users</A>
</I>&gt;<i>
</I>&gt;<i>
</I>-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.2.3 (GNU/Linux)

iD8DBQFCSxPc8KZibdeR3qURAvlIAKDX4kk5ZvOysrU/xVbnzXISDzr5fQCg919l
YG3zl3GvFv/GBog9iRukLMk=
=5SXM
-----END PGP SIGNATURE-----


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000510.html">[Gpsd-users] Gpsd on a Zaurus SL-C3000
</A></li>
	<LI>Next message: <A HREF="000470.html">[Gpsd-users] Gpsd on a Zaurus SL-C3000
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#467">[ date ]</a>
              <a href="thread.html#467">[ thread ]</a>
              <a href="subject.html#467">[ subject ]</a>
              <a href="author.html#467">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/gpsd-users">More information about the Gpsd-users
mailing list</a><br>
</body></html>
