<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Gpsd-users] Earthmate USB, udev, and gpsd
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/gpsd-users/2005-November/index.html" >
   <LINK REL="made" HREF="mailto:gpsd-users%40lists.berlios.de?Subject=Re%3A%20%5BGpsd-users%5D%20Earthmate%20USB%2C%20udev%2C%20and%20gpsd&In-Reply-To=%3C7b9ca310511161400m27da362eh7a3dcb786e01ff33%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001122.html">
   <LINK REL="Next"  HREF="001124.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Gpsd-users] Earthmate USB, udev, and gpsd</H1>
    <B>Michael Ellis</B> 
    <A HREF="mailto:gpsd-users%40lists.berlios.de?Subject=Re%3A%20%5BGpsd-users%5D%20Earthmate%20USB%2C%20udev%2C%20and%20gpsd&In-Reply-To=%3C7b9ca310511161400m27da362eh7a3dcb786e01ff33%40mail.gmail.com%3E"
       TITLE="[Gpsd-users] Earthmate USB, udev, and gpsd">michael.f.ellis at gmail.com
       </A><BR>
    <I>Wed Nov 16 23:00:37 CET 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="001122.html">[Gpsd-users] Gpsd on Mac
</A></li>
        <LI>Next message: <A HREF="001124.html">[Gpsd-users] Problems with gpsfake
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1123">[ date ]</a>
              <a href="thread.html#1123">[ thread ]</a>
              <a href="subject.html#1123">[ subject ]</a>
              <a href="author.html#1123">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I'm having trouble getting Earthmate USB, udev, and gpsd to play nice
together.

My problem is reproducible with more than one Earthmate unit on more than
one computer.

All computers are Thinkpad X31's running Slackware 10.1, kernel 2.6.11.

The udev rule for the Earthmate is:
BUS=&quot;usb&quot;, SYSFS{product}=&quot;DeLorme USB Earthmate&quot;, NAME=&quot;earthmategps&quot;

This creates and destroys /dev/earthmategps when the unit is plugged and
unplugged.

gpsd version is 2.29 launched from rc.local as
/usr/sbin/gpsd -n /dev/earthmategps

In my application, gpsd is queried with 'dpams' once per second.

PROBLEM:
When I unplug the Earthmate and plug it back in, gpsd gives empty reports
(D=?,P=?,A=?,M=3,S=?) even though cat /dev/earthmategps shows that the
earthmate is spitting out valid readings. The empty reports are verifiable
with a telnet connection to localhost 2947, thus ruling out the application
code as the source of the problem.

I need to make the recovery automatic in case a user accidentally unplugs
the Earthmate.

Thanks for any help,
Mike Ellis

--
Michael F. Ellis
Managing Partner
Ellis &amp; Grant, Inc.
Make Better Decisions with PeerTool!
<A HREF="http://www.peertools.com">http://www.peertools.com</A>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/gpsd-users/attachments/20051116/cef41374/attachment.html">https://lists.berlios.de/pipermail/gpsd-users/attachments/20051116/cef41374/attachment.html</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001122.html">[Gpsd-users] Gpsd on Mac
</A></li>
	<LI>Next message: <A HREF="001124.html">[Gpsd-users] Problems with gpsfake
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1123">[ date ]</a>
              <a href="thread.html#1123">[ thread ]</a>
              <a href="subject.html#1123">[ subject ]</a>
              <a href="author.html#1123">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/gpsd-users">More information about the Gpsd-users
mailing list</a><br>
</body></html>
