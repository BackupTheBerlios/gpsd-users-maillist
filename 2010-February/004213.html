<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Gpsd-users] getting ntpd to work with gpsd
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/gpsd-users/2010-February/index.html" >
   <LINK REL="made" HREF="mailto:gpsd-users%40lists.berlios.de?Subject=Re%3A%20%5BGpsd-users%5D%20getting%20ntpd%20to%20work%20with%20gpsd&In-Reply-To=%3C9114FF5C9483EC46AAE0526E0433F022017E9B%40mail5.amherst.edu%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004212.html">
   <LINK REL="Next"  HREF="004219.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Gpsd-users] getting ntpd to work with gpsd</H1>
    <B>Ryan Turcotte 10E</B> 
    <A HREF="mailto:gpsd-users%40lists.berlios.de?Subject=Re%3A%20%5BGpsd-users%5D%20getting%20ntpd%20to%20work%20with%20gpsd&In-Reply-To=%3C9114FF5C9483EC46AAE0526E0433F022017E9B%40mail5.amherst.edu%3E"
       TITLE="[Gpsd-users] getting ntpd to work with gpsd">rturcotte10 at amherst.edu
       </A><BR>
    <I>Mon Feb  8 18:36:38 CET 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="004212.html">[Gpsd-users] GPS speed readings in realtime
</A></li>
        <LI>Next message: <A HREF="004219.html">[Gpsd-users] getting ntpd to work with gpsd
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4213">[ date ]</a>
              <a href="thread.html#4213">[ thread ]</a>
              <a href="subject.html#4213">[ subject ]</a>
              <a href="author.html#4213">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi all,

I need help with gpsd -&gt; ntpd.

It appears the gps is working fine/well, as xgps picks up signals and shows me what satellites it can/cannot see.

But I've added the settings listed in man gps to ntp.conf and am just getting nothing received into ntpd as per this ntpq -p:

     remote           refid      st t when poll reach   delay   offset  jitter
==============================================================================
 SHM(0)          .GPS.            0 l    -   16    0    0.000    0.000   0.002
 SHM(1)          .GPS1.           0 l    -   16    0    0.000    0.000   0.002

I've tried running an empty ntp.conf except for the man page settings, still no go.

I'm running ntpd and gpsd by running 'su' so I am root (correct me if I am wrong, I am still a little bit of a linux amateur). I've tried -n, and some debugging commands for gpsd I was given via #gpsd. I'm running ntpd by jus calling ntpd. I use killall to make sure old processes are dead for gpsd and ntpd.

./gpsd -nNGD 6 /dev/ttyUSB0 2&gt;&amp;1 | egrep 'NTP|PPS' gives me this debug:

gpsd: NTPD shmat(0,0,0) succeeded
gpsd: NTPD shmat(32769,0,0) succeeded
gpsd: NTPD shmat(1114128,0,0) succeeded (i've been told these 2 lines are wrong...)
gpsd: NTPD shmat(1146897,0,0) succeeded
gpsd: NTPD ntpd_link_activate: 0
gpsd: PPS Create Thread gpsd_ppsmonitor
gpsd: NTPD ntpshm_put: Clock: 1265647358.000000 @ 1265676803.976325, fudge: 0.000
gpsd: NTPD ntpshm_put: Clock: 1265647359.000000 @ 1265676804.784199, fudge: 0.000
gpsd: NTPD ntpshm_put: Clock: 1265647360.000000 @ 1265676805.720162, fudge: 0.000
gpsd: NTPD ntpshm_put: Clock: 1265647361.000000 @ 1265676806.720158, fudge: 0.000 (etc ad nauseum)

I've tried gpsd 2.90 compiled and ~2.37/2.38 from apt-get. ntpd is 4.2.4p4 installed via apt-get. One machine I've  tried is a Lenovo T61 with Debian 2.6.18.dfsg.1-24etch2. Other machines have a similar config, and one test machine is an Asus EEE netbook with Eeebuntu (Ubuntu 4.3.2-1ubuntu12 linux 2.6.29-1-netbook).


Umm.. help? Am I overlooking something really simple? Possibly with ntpd?

Thanks,

Ryan

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004212.html">[Gpsd-users] GPS speed readings in realtime
</A></li>
	<LI>Next message: <A HREF="004219.html">[Gpsd-users] getting ntpd to work with gpsd
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4213">[ date ]</a>
              <a href="thread.html#4213">[ thread ]</a>
              <a href="subject.html#4213">[ subject ]</a>
              <a href="author.html#4213">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/gpsd-users">More information about the Gpsd-users
mailing list</a><br>
</body></html>
